# Full name of the release to be used in the chart. If set, overrides the default name generated by Helm.
fullnameOverride: myapp-teste

# Number of replicas for the deployment. Ignored if autoscaling is enabled.
replicaCount: 1

image:
  # Container image repository
  repository: nginx
  # Image pull policy: Always, IfNotPresent, Never
  pullPolicy: IfNotPresent
  # Image tag. If not set, uses .Chart.AppVersion
  tag: latest

livenessProbe:
  # Enable or disable the livenessProbe
  enabled: false
  # HTTP probe configuration
  httpGet:
    path: /
    port: http

readinessProbe:
  # Enable or disable the readinessProbe
  enabled: false
  # HTTP probe configuration
  httpGet:
    path: /
    port: http

service:
  # Kubernetes service type: ClusterIP, NodePort, LoadBalancer
  type: ClusterIP
  # Port exposed externally
  port: 8080
  # Port the container is listening on
  containerPort: 80

clusterIssuer:
  # Enable ClusterIssuer creation
  enabled: false
  # ClusterIssuer name
  name: letsencrypt-prod
  # Email used for Let's Encrypt registration
  email: example@gmail.com
  # ACME production endpoint
  server: https://acme-v02.api.letsencrypt.org/directory
  gateway:
    # Gateway name used for validation
    name: shared-gateway
    # Gateway namespace
    namespace: nginx-gateway

gateway:
  # Enable Gateway creation (disable in other releases)
  enabled: false
  # GatewayClass to use
  gatewayClassName: nginx
  ### ClusterIssuer for automatic TLS
  #clusterIssuer: letsencrypt-prod
  # Gateway name (shared resource)
  name: shared-gateway
  # Gateway namespace
  namespace: nginx-gateway
  listeners:
    - name: http
      port: 80
      protocol: HTTP

    - name: https
      hostname: "example.com.br"
      port: 443
      protocol: HTTPS
      allowedRoutes:
        namespaces:
          # Allow routes from all namespaces
          from: All
      tls:
        # TLS terminates at the Gateway
        mode: Terminate
        certificateRefs:
            # Reference kind
          - kind: Secret
            # TLS secret name
            name: example-tls

httproute:
  # Enable HTTPRoute creation
  enabled: true  
  gateway:
      # Gateway name
    - name: shared-gateway
      # Gateway namespace
      namespace: nginx-gateway
      # HTTPS listener section
      sectionName: https
  # Hostname handled by this route
  hostnames:
    - example.com.br

autoscaling:
  # Enable or disable the HorizontalPodAutoscaler
  enabled: false
  # Minimum number of replicas
  minReplicas: 1
  # Maximum number of replicas
  maxReplicas: 3
  # CPU utilization percentage that triggers autoscaling
  targetCPUUtilizationPercentage: 80

# Schedule pods on specific nodes
nodeSelector: {}
# Tolerations for node taints
tolerations: []
# Pod affinity rules
affinity: {}

# Extra annotations for pods
podAnnotations: {}
# Extra labels for pods
podLabels: {}

# Pod security context
podSecurityContext: {}
# Container security context
securityContext: {}

# List of additional volumes to be mounted into the Pod (empty by default)
volumes: []
# List of additional volume mounts for the container (empty by default)
volumeMounts: []

# Container resource requests and limits
resources:
  enabled: false
  requests:
    cpu: "100m"        # 100 millicores = 0.1 CPU
    memory: "128Mi"    # 128 MB memory
  limits:
    cpu: "500m"        # Maximum 0.5 CPU
    memory: "512Mi"    # Maximum 512 MB

# ConfigMap to be injected via envFrom
configmap:
  enabled: false
  configMapName: ""

# Secret to be injected via envFrom
secret:
  enabled: false # Enable secret usage
  create: false # If true, creates the secret with the data below
  secretName: "minhasecret"   # Secret name (for creation or reference)
  data: 
    SECRET_TEST: "${SECRET_TEST}"

serviceAccount:
  create: false
  name: secretsmanager-sa
  annotations:
    # IAM Role ARN associated via IRSA (EKS) that allows read access to AWS Secrets Manager
    eks.amazonaws.com/role-arn: arn:aws:iam::572966876064:role/Secrets-manager-read-role

# Remote secrets configuration (e.g., AWS Secrets Manager)
secretsremote:
  # Enables remote secrets integration
  enabled: false
  # List of secrets to be consumed
  secrets:
    - awsSecretName: sonarqube
      # Keys to be extracted from the secret
      keys:
        - sonartoken
        - host